<div class="section">
  <h1>{{ 'TITULO_DESPESAS' | npi18n }}</h1>
  <np-widget-grid>
    <np-widget title="{{ 'TITULO_DESPESAS_ADICIONAR' | npi18n }}">
      <np-alert contexto="mensagem-despesas"></np-alert>
      <np-row>
        <np-column size='8'>
          <div class="report-adjust">
            <div style="overflow-x: auto; overflow-y: hidden">
            </div>
            <fieldset>
              <div class="widget-body">
                <div class="table-responsive">
                  <div class="dt-toolbar no-padding">
                    <form [formGroup]="form">
                      <np-row>
                        <div *ngIf="this.listaAnos.length > 0">
                          <np-column size="1">
                            <np-select [items]="this.listaAnos" [(selected)]="model.ano"
                              label="{{'DESPESAS_ANO' | npi18n}}" placeholder="Selecionar o ano" bindValue="id"
                              bindLabel="ano">
                            </np-select>
                          </np-column>
                        </div>
                        <div *ngIf="this.listaMeses.length > 0">
                          <np-column size="1">
                            <np-select [items]="this.listaMeses" [(selected)]="model.mes"
                              label="{{'DESPESAS_MES' | npi18n}}" placeholder="Selecionar o mes" bindValue="id"
                              bindLabel="nome">
                            </np-select>
                          </np-column>
                        </div>
                        <np-column size="1">
                          <np-select [items]="this.listaCategorias" [(selected)]="model.idCategoria"
                            label="{{'DESPESAS_CATEGORIAS' | npi18n}}" placeholder="Selecionar a categoria"
                            bindValue="id" bindLabel="name">
                          </np-select>
                        </np-column>
                        <np-column size="1">
                          <np-input label="{{'DESPESAS_VALOR' | npi18n}}" placeholder="" [form]='form'
                            controlname="valor">
                          </np-input>
                        </np-column>
                      </np-row>
                      <np-row divider="true">
                        <np-column size="1">
                          <np-button title="{{'GENERICO_ADICIONAR' | npi18n:'base'}}" type="submit"
                            (click)="addDespesa()" color="black" [align]="'right'"></np-button>
                        </np-column>
                      </np-row>
                    </form>
                  </div>
                  <table class="table">
                    <thead>
                      <tr>
                        <!-- <th style="width: 14px; height: 20px;"><span
                            class="btn-customizar-coluna fa fa-th-large"></span>
                        </th> -->
                        <th>{{'DESPESAS_MES_ANO' | npi18n }}</th>
                        <th>{{'DESPESAS_VALOR' | npi18n }}</th>
                        <th>{{'DESPESAS_CATEGORIAS' | npi18n }}</th>
                      </tr>
                    </thead>
                    <tbody>
                      <ng-container *ngIf="retornoModel">
                        <ng-container *ngFor="let despesa of retornoModel">
                          <tr>
                            <!-- <td>
                              <gd-menu-contexto [acao]="acao" [itemArray]="despesa.id" [disabled]="false">
                              </gd-menu-contexto>
                            </td> -->
                            <td><strong style="cursor: pointer;" (click)="
                              abrirModal([{ano: despesa.ano, mes: despesa.mes, mesNome: despesa.mesNome, categorias: despesa.categorias}])">
                              <u>{{despesa?.mesNome}}/{{despesa?.ano}}</u></strong></td>
                            <td>{{despesa?.valorFormatado}}</td>
                            <td>{{despesa?.categorias}}</td>
                          </tr>
                        </ng-container>
                      </ng-container>
                    </tbody>
                  </table>
                </div>
              </div>
            </fieldset>
          </div>
        </np-column>
      </np-row>
    </np-widget>
  </np-widget-grid>
</div>
